# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: 3

tasks:
  install:
    desc: Installs Go itself via asdf
    cmds:
      - asdf plugin add golang https://github.com/asdf-community/asdf-golang.git || true
      - asdf install golang latest
      - asdf global golang latest

  tools:install:
    desc: Installs common Go development tools
    cmds:
      - go install golang.org/x/tools/gopls@latest
      - go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
      - go install github.com/go-delve/delve/cmd/dlv@latest
      - go install honnef.co/go/tools/cmd/staticcheck@latest
      - go install github.com/fatih/gomodifytags@latest
      - go install github.com/josharian/impl@latest
      - go install mvdan.cc/gofumpt@latest

  tools:update:
    desc: Updates Go development tools
    cmds:
      - task: tools:install

  clean:
    desc: Cleans Go cache and build artifacts
    cmds:
      - go clean -cache
      - go clean -modcache -i -r
